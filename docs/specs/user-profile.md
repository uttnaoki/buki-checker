# ユーザープロフィール機能仕様書（サンプル）

## 基本情報
- **機能名**: ユーザープロフィール表示・編集
- **作成日**: 2025-12-31
- **更新日**: 2025-12-31
- **担当者**: 開発チーム
- **ステータス**: Draft

## 概要
ユーザーが自分のプロフィール情報を閲覧・編集できる機能

## ユーザーストーリー
**As a** 登録ユーザー
**I want** プロフィール情報を表示・編集できるようにしたい
**So that** 自分の情報を最新に保つことができる

## 要件

### 機能要件
- [x] プロフィール情報の表示
- [x] プロフィール情報の編集
- [x] バリデーション（リアルタイム）
- [ ] アバター画像のアップロード
- [ ] 変更内容の保存

### 非機能要件
- [x] パフォーマンス: ページロード3秒以内
- [x] レスポンシブ: モバイルファースト設計
- [x] アクセシビリティ: WCAG 2.1 AA準拠
- [x] ブラウザ対応: iOS Safari 14+, Android Chrome 90+

## UI/UX仕様

### モバイル画面設計
- **画面サイズ**: 375px - 428px (iPhone基準)
- **タッチターゲット**: 最小44x44px
- **スクロール**: 縦スクロールのみ
- **ジェスチャー**: タップで編集モード切り替え

### ワイヤーフレーム
```
┌────────────────────┐
│  ← プロフィール  編集│
├────────────────────┤
│   [アバター画像]    │
│                    │
│  名前: 山田太郎     │
│  Email: xxx@ex.com │
│  電話: 090-1234... │
│  自己紹介: ...     │
│                    │
│   [保存ボタン]     │
└────────────────────┘
```

### インタラクション
- タップ時: 編集モードに切り替え
- 入力時: リアルタイムバリデーション
- エラー時: 入力欄下部に赤文字で表示

## データ仕様

### 入力データ（編集時）
```typescript
// src/schemas/user.schema.ts を参照
type UpdateUserProfile = {
  name?: string;        // 最大50文字
  phone?: string;       // 090-1234-5678形式
  avatar?: string;      // URL形式
  bio?: string;         // 最大200文字
}
```

### 出力データ（表示）
```typescript
// src/schemas/user.schema.ts を参照
type UserProfile = {
  id: string;           // UUID
  name: string;
  email: string;
  phone?: string;
  avatar?: string;
  bio?: string;
  createdAt: string;    // ISO8601形式
  updatedAt: string;    // ISO8601形式
}
```

### バリデーション
- 名前: 必須、1-50文字
- 電話: 任意、090-1234-5678形式
- 自己紹介: 任意、最大200文字
- アバター: 任意、URL形式

## 技術仕様

### 使用するコンポーネント
- フォーム: React Hook Form + Zod
- バリデーション: `src/schemas/user.schema.ts`
- 型定義: `src/types/user.types.ts`

### 状態管理
- useState: フォーム状態
- React Hook Form: フォーム制御

### パフォーマンス最適化
- [x] コンポーネントのメモ化
- [x] バリデーションのデバウンス
- [ ] 画像の遅延読み込み

## テスト仕様

### テストケース
1. **正常系**
   - [x] プロフィール情報の表示
   - [x] 有効な入力での更新成功
   - [x] バリデーション成功

2. **異常系**
   - [x] 名前が空の場合エラー
   - [x] 名前が51文字以上の場合エラー
   - [x] 電話番号の形式が不正な場合エラー
   - [x] 自己紹介が201文字以上の場合エラー

3. **モバイル特有**
   - [ ] タッチイベントの動作確認
   - [ ] 画面回転時のレイアウト
   - [ ] ソフトキーボード表示時のスクロール

### テストコードパス
- スキーマテスト: `src/schemas/__tests__/user.schema.test.ts`
- コンポーネントテスト: `src/components/__tests__/UserProfile.test.tsx`

## 実装チェックリスト
- [x] 仕様書作成
- [x] 型定義作成（src/types/user.types.ts）
- [x] Zodスキーマ作成（src/schemas/user.schema.ts）
- [ ] テストコード作成
- [ ] コンポーネント実装
- [ ] テスト実行・合格
- [ ] レビュー完了
- [ ] デプロイ

## 参考資料
- Zodドキュメント: https://zod.dev/
- React Hook Form: https://react-hook-form.com/
